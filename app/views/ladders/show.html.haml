- if logged_in?
  - if @ladder.players.include?(current_player)
    - if current_player.pending_challenge_on?(@ladder)
      = render :partial => 'pending', :locals => {:ladder => @ladder}
    - else
      - if current_player.can_make_challenge?(@ladder)
        = render :partial => 'challenge', :locals => {:ladder => @ladder}
      - else
        = render :partial => 'already_challenged_today', :locals => {:ladder => @ladder}
    /= render :partial => 'acceptance'
  - else
    = render :partial => 'join'

%h2= @page_title = @ladder.name
.players.table
  .player.table
    .header.clearfix
      .span-8.prepend-1.player Player
      .span-2.wins Wins
      .span-2.losses Losses

  - if @ladder.players.empty?
    .player.row.clearfix
      .span-13.empty There are no players in this ladder.
  - else
    - @ladder.players.each do |player|
      .player.row.clearfix{:class => "#{'me' if player == current_player}"}
        .span-1
          .rank.number= player.rank_for(@ladder).position
        .span-8.name= player.login
        .span-2.wins.number
        .span-2.losses.number
